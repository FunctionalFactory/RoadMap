# RouteHair 웹사이트 개선 단계별 실행 계획

> 본 문서는 RouteHair 웹 애플리케이션의 점진적 개선을 위한 단계별 실행 계획입니다.
> 각 Phase는 독립적으로 실행 가능하며, 순차적으로 프로젝트를 개선해 나갑니다.
> **데이터베이스는 사용하지 않으며, Mock 데이터와 로컬 스토리지를 활용합니다.**

---

## **Phase 1: 기본 상태 관리 및 필터 기능 구현**

### 📋 오버뷰

현재 정적인 UI만 존재하는 상태에서 React 상태 관리를 도입하여 지역/카테고리 필터 기능을 실제로 동작하도록 구현합니다. 사용자가 필터를 변경하면 업소 리스트가 실시간으로 업데이트되도록 합니다.

### 🎯 구현할 기능

#### 수정/개선 사항

- [x] `app/page.tsx`를 Client Component로 변환하고 상태 관리 추가
- [x] `useState`를 사용하여 필터 상태 관리 (city, district, category)
- [x] `RegionFilter` 컴포넌트에 onChange 핸들러 추가
- [x] 시/도 선택 시 구/시 목록 동적 업데이트 (서울 선택 시 구 목록, 경기 선택 시 시 목록)
- [x] 필터 변경 시 업소 목록 자동 필터링 로직 구현
- [x] 필터링된 업소 수 실시간 표시 (Badge 업데이트)
- [x] "전체" 카테고리 선택 시 모든 카테고리 표시

#### 작업 완료 후 검증 사항

- [x] 시/도 선택 시 구/시 드롭다운이 올바르게 업데이트되는지 확인
- [x] 강남구, 서초구, 송파구 등 다른 구 선택 시 해당 구의 업소만 표시되는지 확인
- [x] 경기 선택 후 성남시, 수원시 등 선택 시 올바른 업소 표시 확인
- [x] 카테고리(미용실, 헤어샵, 살롱) 선택 시 필터링 동작 확인
- [x] 업소 목록의 Badge가 현재 표시되는 업소 수를 정확히 표시하는지 확인
- [x] 필터 초기값(서울-강남구-전체)으로 올바른 업소가 표시되는지 확인

---

## **Phase 2: 업소 선택 기능 및 동선 최적화 패널 연동**

### 📋 오버뷰

업소 리스트의 체크박스를 동작시키고, 선택된 업소들을 추적하여 동선 최적화 패널에 반영합니다. 사용자가 5~10개의 업소를 선택할 수 있도록 제약을 추가하고, 선택된 업소 정보를 우측 방문 상세 패널에 표시합니다.

### 🎯 구현할 기능

#### 수정/개선 사항

- [x] 선택된 업소 ID 배열을 관리하는 상태 추가 (`selectedSalonIds: string[]`)
- [x] `SalonList` 컴포넌트에 선택 상태 및 onChange 핸들러 props 추가
- [x] 체크박스 클릭 시 선택 상태 토글 기능 구현
- [x] 5~10개 선택 제약 조건 구현 (10개 초과 시 경고 메시지)
- [x] `RouteOptimizer` 컴포넌트에 선택된 업소 수 표시
- [x] 선택된 업소가 5개 미만일 때 "동선 만들기" 버튼 비활성화
- [x] 체크박스 선택 시 시각적 피드백 추가 (선택된 항목 하이라이트)
- [x] `VisitChecklist` 컴포넌트에 선택된 첫 번째 업소 정보 표시
- [x] 업소 항목 클릭 시 해당 업소를 방문 상세 패널에 표시

#### 작업 완료 후 검증 사항

- [x] 업소 체크박스 클릭 시 선택/해제가 정상 동작하는지 확인
- [x] 동선 최적화 패널의 "선택된 방문지" Badge가 실시간 업데이트되는지 확인
- [x] 10개 초과 선택 시 경고 메시지가 표시되고 선택이 방지되는지 확인
- [x] 5개 미만 선택 시 "동선 만들기" 버튼이 비활성화되는지 확인
- [x] 선택된 업소 항목이 시각적으로 구분되는지 확인 (배경색 변경 등)
- [x] 업소 클릭 시 우측 방문 상세 패널에 정보가 표시되는지 확인
- [x] 필터 변경 후 선택 상태가 올바르게 유지/초기화되는지 확인

---

## **Phase 3: 카카오 지도 연동 및 마커 표시**

### 📋 오버뷰

Placeholder로 되어 있는 지도 영역에 실제 카카오 지도 API를 연동하고, 필터링된 업소들을 마커로 표시합니다. 선택된 업소는 다른 색상의 마커로 표시하여 시각적으로 구분합니다.

### 🎯 구현할 기능

#### 수정/개선 사항

- [x] 카카오 지도 JavaScript SDK 스크립트 추가 (`app/layout.tsx`)
- [x] 카카오 지도 API 키 환경변수 설정 (`.env.local`)
- [x] `KakaoMap` 컴포넌트에 실제 지도 초기화 로직 구현
- [x] 필터링된 업소 목록을 받아 마커 생성 기능 구현
- [x] 선택된 업소 마커는 파란색, 일반 업소는 빨간색으로 표시
- [x] 마커 클릭 시 인포윈도우로 업소 정보 표시 (상호, 주소, 전화)
- [x] 지도 중심 좌표를 필터링된 업소들의 중심으로 자동 이동
- [x] 지도 줌 레벨 자동 조정 (모든 마커가 보이도록)
- [x] 마커 클릭 시 해당 업소를 우측 방문 상세 패널에 표시
- [x] 업소 리스트 항목 클릭 시 해당 마커로 지도 중심 이동

#### 작업 완료 후 검증 사항

- [x] 페이지 로드 시 카카오 지도가 정상적으로 표시되는지 확인
- [x] 필터링된 업소들이 지도에 마커로 표시되는지 확인
- [ ] 선택된 업소 마커가 다른 색상으로 표시되는지 확인
- [ ] 마커 클릭 시 인포윈도우가 올바른 정보를 표시하는지 확인
- [x] 필터 변경 시 마커가 자동으로 업데이트되는지 확인
- [x] 지도 중심 및 줌 레벨이 자동으로 조정되는지 확인
- [x] 업소 선택/해제 시 마커 색상이 즉시 변경되는지 확인
- [x] 리스트 항목 클릭 시 해당 마커로 지도가 이동하는지 확인
- [ ] 모바일 환경에서도 지도가 정상 동작하는지 확인

---

## **Phase 4: 동선 최적화 알고리즘 구현**

### 📋 오버뷰

선택된 5~10개 업소에 대해 최적 방문 순서를 계산하는 알고리즘을 구현합니다. Nearest Neighbor 알고리즘을 사용하여 간단한 TSP 문제를 해결하고, 결과를 지도에 경로선으로 표시합니다.

### 🎯 구현할 기능

#### 수정/개선 사항

- [x] `lib/utils/route-optimizer.ts` 파일 생성
- [x] Nearest Neighbor 알고리즘 구현 (거리 기준)
- [x] Haversine 공식을 사용한 두 좌표 간 거리 계산 함수 구현
- [x] 시간 최소화 모드 구현 (거리 × 1.2 가중치 적용)
- [x] 총 이동 거리 및 예상 소요 시간 계산
- [x] `RouteOptimizer` 컴포넌트에 "동선 만들기" 버튼 클릭 핸들러 추가
- [x] 최적화 결과를 상태로 저장 (`optimizedRoute`)
- [x] 계산된 총 거리 및 소요 시간을 UI에 표시
- [x] 지도에 경로 폴리라인 표시 (카카오 지도 Polyline API)
- [x] 순서대로 마커에 번호 표시 (1, 2, 3...)
- [x] 업소 리스트를 최적화된 순서로 재정렬하는 옵션 추가

#### 작업 완료 후 검증 사항

- [x] "동선 만들기" 버튼 클릭 시 알고리즘이 실행되는지 확인
- [x] 총 이동 거리(km)가 정확히 계산되어 표시되는지 확인
- [x] 예상 소요 시간(분)이 표시되는지 확인
- [x] 지도에 경로 폴리라인이 표시되는지 확인
- [x] 마커에 방문 순서 번호가 표시되는지 확인
- [ ] 시간 최소/거리 최소 모드 전환이 정상 동작하는지 확인
- [ ] 출발지 입력 변경 시 경로가 재계산되는지 확인
- [ ] 5개 업소와 10개 업소 선택 시 모두 정상 동작하는지 확인
- [ ] 계산 속도가 1초 이내인지 확인

---

## **Phase 5: 방문 체크리스트 및 로컬 스토리지 구현**

### 📋 오버뷰

방문 체크리스트 기능을 구현하여 사용자가 각 업소 방문 완료 여부를 체크하고 메모를 작성할 수 있도록 합니다. 모든 데이터는 브라우저의 로컬 스토리지에 저장되어 새로고침 후에도 유지됩니다.

### 🎯 구현할 기능

#### 수정/개선 사항

- [x] `lib/utils/storage.ts` 파일 생성 (로컬 스토리지 유틸리티)
- [x] 방문 기록 저장/불러오기 함수 구현
- [x] `VisitChecklist` 컴포넌트에 체크박스 상태 관리 추가
- [x] 메모 입력 및 저장 기능 구현
- [x] "저장" 버튼 클릭 시 로컬 스토리지에 저장
- [x] 전화 걸기 버튼 기능 구현 (`tel:` 링크)
- [x] 주소 복사 기능 구현 (클립보드 API)
- [x] 방문 완료 시 시각적 피드백 (체크 아이콘, 배경색 변경)
- [x] 업소 리스트에서 방문 완료된 항목 표시 (체크 아이콘)
- [x] 지도 마커에 방문 완료 표시 (마커 스타일 변경)
- [x] `/history` 페이지에 로컬 스토리지 데이터 연동
- [x] 날짜별 필터 기능 추가 (오늘, 어제, 지난 7일 등)

#### 작업 완료 후 검증 사항

- [x] 방문 완료 체크 시 상태가 저장되는지 확인
- [x] 메모 입력 후 저장 버튼 클릭 시 로컬 스토리지에 저장되는지 확인
- [x] 페이지 새로고침 후 저장된 데이터가 유지되는지 확인
- [x] 전화 걸기 버튼 클릭 시 전화 앱이 실행되는지 확인 (모바일)
- [x] 주소 복사 기능이 정상 동작하는지 확인
- [x] 업소 리스트에서 방문 완료된 항목이 시각적으로 구분되는지 확인
- [x] 지도 마커에 방문 완료 표시가 반영되는지 확인
- [x] `/history` 페이지에 저장된 방문 기록이 표시되는지 확인
- [x] 날짜별 필터 기능이 정상 동작하는지 확인
- [x] 완료율이 정확히 계산되어 표시되는지 확인

---

## **Phase 6: UI/UX 개선 및 반응형 최적화**

### 📋 오버뷰

모바일 및 태블릿 환경에서의 사용성을 개선하고, 전반적인 UI/UX를 향상시킵니다. 로딩 상태, 에러 처리, 애니메이션 등을 추가하여 사용자 경험을 개선합니다.

### 🎯 구현할 기능

#### 수정/개선 사항

- [ ] 모바일 환경에서 3단 레이아웃을 탭 구조로 변경
- [ ] 필터 패널을 모바일에서 슬라이드 오버 형태로 변경
- [ ] 지도/리스트 전환 탭 추가 (모바일)
- [x] 로딩 스피너 컴포넌트 추가 (동선 최적화 중)
- [ ] 에러 바운더리 추가
- [x] Toast 알림 시스템 구현 (저장 완료, 에러 등)
- [ ] 업소 선택 시 부드러운 애니메이션 추가
- [ ] 지도 마커 클러스터링 구현 (업소 많을 때)
- [ ] 스켈레톤 로딩 UI 추가
- [ ] 접근성 개선 (키보드 네비게이션, ARIA 속성)
- [ ] 다크 모드 지원 (선택 사항)
- [x] 업소 검색 기능 추가 (이름/주소 검색)

#### 작업 완료 후 검증 사항

- [ ] 모바일(375px), 태블릿(768px), 데스크탑(1024px+)에서 레이아웃 확인
- [ ] 터치 제스처가 자연스럽게 동작하는지 확인 (모바일)
- [x] 동선 계산 중 로딩 스피너가 표시되는지 확인
- [ ] 에러 발생 시 적절한 에러 메시지가 표시되는지 확인
- [x] Toast 알림이 적절한 타이밍에 표시되는지 확인
- [ ] 애니메이션이 부드럽게 동작하는지 확인 (60fps)
- [ ] 마커 클러스터링이 대량 데이터에서 정상 동작하는지 확인
- [ ] 키보드만으로 주요 기능을 사용할 수 있는지 확인
- [ ] 스크린 리더로 콘텐츠를 읽을 수 있는지 확인
- [ ] 다크 모드 전환이 자연스러운지 확인 (선택 사항)
- [x] 검색 기능이 정확하고 빠르게 동작하는지 확인

---

## **Phase 7: 성능 최적화 및 배포 준비**

### 📋 오버뷰

애플리케이션의 성능을 최적화하고, 프로덕션 배포를 위한 준비를 완료합니다. 번들 크기 최적화, 이미지 최적화, SEO 개선 등을 수행합니다.

### 🎯 구현할 기능

#### 수정/개선 사항

- [ ] React.memo로 불필요한 리렌더링 방지
- [ ] useMemo, useCallback 훅을 사용한 최적화
- [ ] 동적 import로 카카오 지도 스크립트 lazy loading
- [ ] 업소 리스트 가상화(Virtualization) 구현
- [ ] 이미지 최적화 (Next.js Image 컴포넌트 사용)
- [ ] 번들 분석 및 최적화 (next-bundle-analyzer)
- [ ] 메타데이터 및 OG 태그 추가
- [ ] robots.txt, sitemap.xml 생성
- [ ] PWA 설정 (선택 사항)
- [ ] 환경변수 검증 및 타입 안전성 확보
- [ ] Vercel/Netlify 배포 설정
- [ ] 성능 측정 및 Lighthouse 점수 90+ 달성

#### 작업 완료 후 검증 사항

- [ ] 초기 로딩 시간이 2초 이내인지 확인
- [ ] 번들 크기가 최적화되었는지 확인 (< 200KB)
- [ ] 업소 리스트 스크롤이 부드러운지 확인 (1000개 이상)
- [ ] 메모리 누수가 없는지 확인 (개발자 도구)
- [ ] Lighthouse 성능 점수 90+ 확인
- [ ] SEO 점수 90+ 확인
- [ ] 접근성 점수 90+ 확인
- [ ] 메타 태그가 올바르게 설정되었는지 확인
- [ ] 프로덕션 빌드가 성공하는지 확인 (`npm run build`)
- [ ] 배포 후 실제 URL에서 정상 동작하는지 확인
- [ ] 다양한 브라우저(Chrome, Safari, Firefox)에서 테스트
- [ ] 모바일 실기기에서 테스트

---

## 📌 중요 사항

### 데이터 관리 원칙

- **데이터베이스 미사용**: 모든 Phase에서 데이터베이스는 사용하지 않습니다
- **Mock 데이터 활용**: `lib/mock-data/` 디렉토리의 데이터를 활용합니다
- **로컬 스토리지**: 사용자 데이터(방문 기록, 메모)는 브라우저 로컬 스토리지에 저장합니다

### Phase 진행 방식

1. 각 Phase는 독립적으로 실행 가능해야 합니다
2. 이전 Phase의 완료를 전제로 다음 Phase를 진행합니다
3. 각 Phase 완료 후 검증 체크리스트를 모두 확인해야 합니다
4. 검증이 완료되면 다음 Phase로 진행합니다

### 에이전트 작업 시 참고사항

- 본 문서의 각 Phase를 독립적인 작업 단위로 처리합니다
- 오버뷰, 수정/개선 사항, 검증 사항을 모두 참고하여 작업합니다
- 검증 체크리스트는 작업 완료 후 반드시 확인합니다
- 이전 Phase의 구현 내용을 유지하면서 개선합니다

---

**문서 버전**: 1.0
**최종 수정일**: 2025-10-24
**프로젝트**: RouteHair - 영업 동선 최적화 웹앱
